!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).CG={})}(this,function(t){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function h(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n,i;e=r,i=o[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=r(n);return s(this,i?(t=r(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var g=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o(this,n),this.callback=t,this.options=e,this._playing=!1,this._step=-1}return a(n,[{key:"_setTimeout",value:function(){var t=this.options.frameDuration;this._requestId=t?window.setTimeout(this._anim.bind(this),t):window.requestAnimationFrame(this._anim.bind(this))}},{key:"_clearTimeout",value:function(){this.options.frameDuration?window.clearTimeout(this._requestId):window.cancelAnimationFrame(this._requestId)}},{key:"_anim",value:function(){var t=this.options,e=t.frameCount,n=t.recycle;if(e&&this._step>=e-1?this._step=0:this._step+=1,this.callback(this._step),!1===n&&e&&this._step===e-1)return this._playing=!1,void(this._step=-1);this._playing&&this._setTimeout()}},{key:"start",value:function(){this._playing||(this._setTimeout(),this._playing=!0)}},{key:"stop",value:function(){this._clearTimeout(),this._playing=!1,this._step=-1}},{key:"pause",value:function(){this._playing&&(this._clearTimeout(),this._playing=!1)}},{key:"reset",value:function(){this._clearTimeout(),this._playing=!1,this._step=-1,this.callback(this._step)}},{key:"setStep",value:function(t){var e=this.options.frameCount,n=Number.parseInt(t,10);!this._playing&&e&&-1<n&&n<e&&(this._step=n,this.callback(this._step))}},{key:"next",value:function(){var t=this.options.frameCount;this._playing||(t&&this._step>=t-1?this._step=0:this._step+=1,this.callback(this._step))}},{key:"prev",value:function(){var t=this.options.frameCount;this._playing||(this._step<=0?this._step=t?t-1:0:--this._step,this.callback(this._step))}}]),n}(),y=3,v="#ca562c",p=2,d="#3969AC",x={width:2,strokeColor:"#008080",fillColor:"#b4c8a8"},m=1e-10;function b(t,e){return t.equal(e)?0:t.x<e.x||t.x===e.x&&t.y<e.y?-1:1}function C(t,e,n){return t.x*e.y-t.y*e.x+e.x*n.y-e.y*n.x+n.x*t.y-n.y*t.x}function w(t,e,n){return 0<C(t,e,n)}function _(t,e,n){return 0<=C(t,e,n)}function E(t,e,n){return C(t,e,n)<0}function T(t,e,n){var i=C(t,e,n);if(0<i)return!0;if(i<0)return!1;if(t.distanceTo(e)<t.distanceTo(n))return!0;if(t.distanceTo(e)>t.distanceTo(n))return!1;throw new Error("toLeft: Input same point")}function O(t,e,n){return 0===C(t,e,n)&&(t.x!==e.x?t.x<=n.x&&n.x<=e.x||e.x<=n.x&&n.x<=t.x:t.y<=n.y&&n.y<=e.y||e.y<=n.y&&n.y<=t.y)}function P(t,e,n,i){return!(t.equal(n)||t.equal(i)||e.equal(n)||e.equal(i))&&(w(t,e,n)!==w(t,e,i)&&w(n,i,t)!==w(n,i,e))}function S(t,e,n){for(var i=t.length,r=0;r<i-1;r++)if(P(t[r],t[r+1],e,n))return!1;return!(!t[i-1].equal(t[0])&&P(t[i-1],t[0],e,n))}function I(t,e,n,i){return _(e,n,t)?w(e,i,t)&&w(i,e,n):!(_(e,i,n)&&_(i,e,t))}function V(t){for(var e=0,n=1;n<t.length;n++)(t[n].y<t[e].y||t[n].y===t[e].y&&t[n].x<t[e])&&(e=n);return e}function M(t){var e=t.slice(),n=V(e),i=e[n];return e.splice(n,1),e.sort(function(t,e){return C(i,e,t)}),e.unshift(i),e}var A=Object.freeze({__proto__:null,PRECISION:m,pointComparator:b,pointComparatorY:function(t,e){return t.equal(e)?0:t.y<e.y||t.y===e.y&&t.x<e.x?-1:1},area2:C,areaSign:function(t,e,n){var i=(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y);return i<-.5?-1:.5<i?1:0},collinear:function(t,e,n){return Math.abs(C(t,e,n))<m},left:w,leftOn:_,right:E,toLeft:T,between:O,inTriangle:function(t,e,n,i){var r=T(e,n,i);return T(t,e,i)===r&&r===T(n,t,i)},intersectProp:P,diagonalie:S,inCone:I,LTL:V,leftSort:M,inCircumcircle:function(t,e,n,i){var r=Math.pow(i.x,2)+Math.pow(i.y,2),o=Math.pow(t.x,2)+Math.pow(t.y,2)-r,s=Math.pow(e.x,2)+Math.pow(e.y,2)-r,a=Math.pow(n.x,2)+Math.pow(n.y,2)-r;return 0<(t.x-i.x)*(e.y-i.y)*a+(e.x-i.x)*(n.y-i.y)*o+(n.x-i.x)*(t.y-i.y)*s-(t.x-i.x)*(n.y-i.y)*s-(e.x-i.x)*(t.y-i.y)*a-(n.x-i.x)*(e.y-i.y)*o},volumeSign:function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=t.z-i.z,a=e.x-i.x,h=e.y-i.y,u=e.z-i.z,l=n.x-i.x,c=n.y-i.y,f=n.z-i.z,g=r*(h*f-u*c)-o*(a*f-u*l)+s*(a*c-h*l);return g<-.5?-1:.5<g?1:0}}),z=function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;o(this,i),this.x=t,this.y=e,this.z=n}return a(i,[{key:"distanceTo",value:function(t){if(!(t instanceof i))throw new TypeError("parameter is not Point");return Math.sqrt(Math.pow(Math.abs(this.x-t.x),2)+Math.pow(Math.abs(this.y-t.y),2)+Math.pow(Math.abs(this.z-t.z),2))}},{key:"equal",value:function(t){if(!(t instanceof i))throw new TypeError("parameter is not Point");return Math.abs(this.x-t.x)<m&&Math.abs(this.y-t.y)<m&&Math.abs(this.z-t.z)<m}}]),i}(),j=function(){function s(t,e){if(o(this,s),t instanceof z&&e instanceof z)return this.begin=t,void(this.end=e);try{this.begin=new z(t.x,t.y),this.end=new z(e.x,e.y)}catch(t){throw new TypeError("Segment needs begin & end point")}}return a(s,[{key:"parallelInt",value:function(t){return 0!==C(this.begin,this.end,t.begin)?null:O(this.begin,this.end,t.begin)?t.begin:O(this.begin,this.end,t.end)?t.end:O(t.begin,t.end,this.begin)?this.begin:O(t.begin,t.end,this.end)?this.end:null}},{key:"intersect",value:function(t){if(!(t instanceof s))throw new TypeError("Not Segment");var e=this.begin.x*(t.end.y-t.begin.y)+this.end.x*(t.begin.y-t.end.y)+t.end.x*(this.end.y-this.begin.y)+t.begin.x*(this.begin.y-this.end.y);if(0==e)return this.parallelInt(t);var n=(this.begin.x*(t.end.y-t.begin.y)+t.begin.x*(this.begin.y-t.end.y)+t.end.x*(t.begin.y-this.begin.y))/e,i=-(this.begin.x*(t.begin.y-this.end.y)+this.end.x*(this.begin.y-t.begin.y)+t.begin.x*(this.end.y-this.begin.y))/e;if(n<-m||1+m<n||i<-m||1+m<i)return null;var r=this.begin.x+n*(this.end.x-this.begin.x),o=this.begin.y+n*(this.end.y-this.begin.y);return new z(r,o)}},{key:"intersectProp",value:function(t){if(!(t instanceof s))throw new TypeError("Not Segment");return T(this.begin,this.end,t.begin)!==T(this.begin,this.end,t.end)&&T(t.begin,t.end,this.begin)!==T(t.begin,t.end,this.end)}}]),s}(),q=function(){function e(t){o(this,e),this.vertices=t.slice(),t[0]&&!t[0].equal(t[t.length-1])&&this.vertices.push(t[0])}return a(e,[{key:"area",value:function(){for(var t=this.vertices.length,e=0,n=0;n<t-1;n++)e+=(this.vertices[n].x+this.vertices[n+1].x)*(this.vertices[n+1].y-this.vertices[n].y);return e/2}}]),e}(),L=function(){function r(t,e,n,i){o(this,r),this.leftBottom=new z(t,e),this.rightTop=new z(n,i)}return a(r,[{key:"Intersect",value:function(t){return!(this.leftBottom.x>t.rightTop.x||this.rightTop.x<t.leftBottom.x)&&!(this.leftBottom.y>t.rightTop.y||this.rightTop.y<t.leftBottom.y)}}]),r}(),R=function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;o(this,i),this.x=t,this.y=e,this.z=n}return a(i,[{key:"normalize",value:function(){var t=this.length;return new i(this.x/t,this.y/t,this.z/t)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"scale",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"rotateZ",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.x,r=this.y;return this.x=i*e-r*n,this.y=i*n+r*e,this}},{key:"copy",value:function(){return new i(this.x,this.y,this.z)}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}}],[{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}},{key:"cross",value:function(t,e){return new i(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}},{key:"cos",value:function(t,e){return this.dot(t.normalize(),e.normalize())}},{key:"projection",value:function(t,e){return t.copy().scale(e.length*this.cos(t,e))}}]),i}(),F=function(){function n(t,e){o(this,n);try{this.origin=new z(t.x,t.y),this.direction=new R(e.x,e.y)}catch(t){throw new TypeError("Line need origin and direction:",t)}}return a(n,[{key:"getPoint",value:function(t){return new z(this.origin.x+t*this.direction.x,this.origin.y+t*this.direction.y)}},{key:"intersect",value:function(t){var e=this.getPoint(1),n=t.getPoint(1),i=this.origin.x*(n.y-t.origin.y)+e.x*(t.origin.y-n.y)+n.x*(e.y-this.origin.y)+t.origin.x*(this.origin.y-e.y);if(0==i)throw new Error("Parallel: ".concat(JSON.stringify(this),", ").concat(JSON.stringify(t)));var r=(this.origin.x*(n.y-t.origin.y)+t.origin.x*(this.origin.y-n.y)+n.x*(t.origin.y-this.origin.y))/i,o=this.origin.x+r*(e.x-this.origin.x),s=this.origin.y+r*(e.y-this.origin.y);return new z(o,s)}},{key:"intersectSegProp",value:function(t){return this.right(t.begin)!==this.right(t.end)}},{key:"intersectSegment",value:function(t){var e=this.getPoint(1),n=this.origin.x*(t.end.y-t.begin.y)+e.x*(t.begin.y-t.end.y)+t.end.x*(e.y-this.origin.y)+t.begin.x*(this.origin.y-e.y);if(0==n)throw new Error("Parallel: ".concat(JSON.stringify(this),", ").concat(JSON.stringify(t)));var i=-(this.origin.x*(t.begin.y-e.y)+e.x*(this.origin.y-t.begin.y)+t.begin.x*(e.y-this.origin.y))/n;if(i<-m||1+m<i)throw new Error("Line not intersect segment: ".concat(JSON.stringify(this),", ").concat(JSON.stringify(t)));var r=t.begin.x+i*(t.end.x-t.begin.x),o=t.begin.y+i*(t.end.y-t.begin.y);return new z(r,o)}},{key:"intersectRay",value:function(t){var e=this.getPoint(1),n=t.getPoint(1),i=this.origin.x*(n.y-t.origin.y)+e.x*(t.origin.y-n.y)+n.x*(e.y-this.origin.y)+t.origin.x*(this.origin.y-e.y);if(0==i)throw new Error("Parallel: ".concat(JSON.stringify(this),", ").concat(JSON.stringify(seg)));var r=-(this.origin.x*(t.origin.y-e.y)+e.x*(this.origin.y-t.origin.y)+t.origin.x*(e.y-this.origin.y))/i;if(r<-m)return null;var o=t.origin.x+r*(n.x-t.origin.x),s=t.origin.y+r*(n.y-t.origin.y);return new z(o,s)}},{key:"rayIntersectSegment",value:function(t){var e=this.getPoint(1),n=this.origin.x*(t.end.y-t.begin.y)+e.x*(t.begin.y-t.end.y)+t.end.x*(e.y-this.origin.y)+t.begin.x*(this.origin.y-e.y);if(0==n)throw new Error("Parallel: ".concat(JSON.stringify(this),", ").concat(JSON.stringify(t)));var i=(this.origin.x*(t.end.y-t.begin.y)+t.begin.x*(this.origin.y-t.end.y)+t.end.x*(t.begin.y-this.origin.y))/n,r=-(this.origin.x*(t.begin.y-e.y)+e.x*(this.origin.y-t.begin.y)+t.begin.x*(e.y-this.origin.y))/n;if(i<-m||r<-m||1+m<r)return null;var o=t.begin.x+r*(t.end.x-t.begin.x),s=t.begin.y+r*(t.end.y-t.begin.y);return new z(o,s)}},{key:"right",value:function(t){return E(this.origin,this.getPoint(1),t)}},{key:"left",value:function(t){return w(this.origin,this.getPoint(1),t)}}],[{key:"bisect",value:function(t,e){if(t.equal(e))throw new Error("Input equal points");return new n(new z((t.x+e.x)/2,(t.y+e.y)/2),new R(e.x-t.x,e.y-t.y).normalize().rotateZ(-Math.PI/2))}}]),n}(),N=Object.freeze({__proto__:null,Util:A,Point:z,Segment:j,Polygon:q,Rectangle:L,Line:F,Vector:R}),H=function(){function i(t){o(this,i),this.canvas=t;var e=Math.max(window.devicePixelRatio||2,2),n=this.canvas.getBoundingClientRect();this.width=n.width,this.height=n.height,this.canvas.width=n.width*e,this.canvas.height=n.height*e,this.ctx=t.getContext("2d"),this.ctx.scale(e,e),this.ctx.lineJoin="round"}return a(i,[{key:"clearCanvas",value:function(){var t=this.ctx.canvas,e=t.width,n=t.height;this.ctx.clearRect(0,0,e,n)}},{key:"drawPoint",value:function(t,e,n){var i,r=1<arguments.length&&void 0!==e?e:y,o=2<arguments.length&&void 0!==n?n:v;t&&t instanceof z&&(i=this.height,this.ctx.save(),this.ctx.lineWidth=r,this.ctx.strokeStyle=o,this.ctx.beginPath(),this.ctx.arc(t.x,i-t.y,r/2,0,2*Math.PI),this.ctx.stroke(),this.ctx.restore())}},{key:"drawPoints",value:function(t,e,n){var i,r=this,o=1<arguments.length&&void 0!==e?e:y,s=2<arguments.length&&void 0!==n?n:v;Array.isArray(t)&&(i=this.height,this.ctx.save(),this.ctx.lineWidth=o,this.ctx.strokeStyle=s,this.ctx.beginPath(),t.forEach(function(t){r.ctx.moveTo(t.x,i-t.y),r.ctx.arc(t.x,i-t.y,o/2,0,2*Math.PI)}),this.ctx.stroke(),this.ctx.restore())}},{key:"drawSegment",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:p,r=2<arguments.length&&void 0!==n?n:d,o=this.height;this.ctx.save(),void 0!==i&&(this.ctx.lineWidth=i),void 0!==r&&(this.ctx.strokeStyle=r),this.ctx.beginPath(),this.ctx.moveTo(t.begin.x,o-t.begin.y),this.ctx.lineTo(t.end.x,o-t.end.y),this.ctx.stroke(),this.ctx.restore()}},{key:"drawSegments",value:function(t,e,n){var i=this,r=1<arguments.length&&void 0!==e?e:p,o=2<arguments.length&&void 0!==n?n:d;this.ctx.save(),void 0!==r&&(this.ctx.lineWidth=r),void 0!==o&&(this.ctx.strokeStyle=o);var s=this.height;this.ctx.beginPath(),t.forEach(function(t){i.ctx.moveTo(t.begin.x,s-t.begin.y),i.ctx.lineTo(t.end.x,s-t.end.y)}),this.ctx.stroke(),this.ctx.restore()}},{key:"drawPolygon",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:{style:{}},i=h({},x);Object.assign(i,n.style),this.ctx.save(),this.ctx.lineWidth=i.width,this.ctx.fillStyle=i.fillColor,this.ctx.strokeStyle=i.strokeColor;var r=t.vertices;if(r&&Array.isArray(r)&&!(r.length<1)){var o=this.height;this.ctx.beginPath(),this.ctx.moveTo(r[0].x,o-r[0].y);for(var s=1;s<r.length;s++)this.ctx.lineTo(r[s].x,o-r[s].y);this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore()}}},{key:"drawPolygons",value:function(t,e){var n,i,r,o=this,s=1<arguments.length&&void 0!==e?e:{style:{}};t&&Array.isArray(t)&&(n=h({},x),Object.assign(n,s.style),this.ctx.save(),this.ctx.lineWidth=n.width,this.ctx.fillStyle=n.fillColor,this.ctx.strokeStyle=n.strokeColor,i=this.height,this.ctx.beginPath(),t.forEach(function(t){if((r=t.vertices?t.vertices:t)&&Array.isArray(r)&&1<r.length){o.ctx.moveTo(r[0].x,i-r[0].y);for(var e=1;e<r.length;e++)o.ctx.lineTo(r[e].x,i-r[e].y);o.ctx.closePath()}}),this.ctx.fill(),this.ctx.stroke(),this.ctx.restore())}},{key:"drawText",value:function(t,e,n,i){var r=1<arguments.length&&void 0!==e?e:0,o=2<arguments.length&&void 0!==n?n:0,s=3<arguments.length&&void 0!==i?i:{style:{},fill:!0},a=this.height;this.ctx.save(),s.textBaseline&&(this.ctx.textBaseline=s.textBaseline),this.ctx.font=s.font,s.fill?this.ctx.fillText(t,r,a-o):this.ctx.strokeText(t,r,a-o),this.ctx.restore()}}]),i}();var J=function(){function e(t){o(this,e),this.compare=t||e.defaultCompareFunction}return a(e,[{key:"equal",value:function(t,e){return 0===this.compare(t,e)}},{key:"lessThan",value:function(t,e){return this.compare(t,e)<0}},{key:"greaterThan",value:function(t,e){return 0<this.compare(t,e)}},{key:"lessThanOrEqual",value:function(t,e){return this.lessThan(t,e)||this.equal(t,e)}},{key:"greaterThanOrEqual",value:function(t,e){return this.greaterThan(t,e)||this.equal(t,e)}},{key:"reverse",value:function(){var n=this.compare;this.compare=function(t,e){return n(e,t)}}}],[{key:"defaultCompareFunction",value:function(t,e){return t===e?0:t<e?-1:1}}]),e}(),D=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0;o(this,r),this.heapType=e,this.compareFunciont=n,this.nodeValueComparator=new J(n),this.heapContainter=t.slice();for(var i=Math.floor(this.length/2);0<=i;i--)this.heapifyDown(i)}return a(r,[{key:"inHeap",value:function(t){return 0<=t&&t<this.length}},{key:"getLeftIndex",value:function(t){return 2*t+1}},{key:"getRightIndex",value:function(t){return 2*t+2}},{key:"getParentIndex",value:function(t){return Math.floor((t-1)/2)}},{key:"getLeft",value:function(t){return this.heapContainter[this.getLeftIndex(t)]}},{key:"getRight",value:function(t){return this.heapContainter[this.getRightIndex(t)]}},{key:"getParent",value:function(t){return this.heapContainter[this.getParentIndex(t)]}},{key:"insert",value:function(t){return this.heapContainter.push(t),this.heapifyUp(),this}},{key:"pop",value:function(){if(0===this.length)return null;if(1===this.length)return this.heapContainter.pop();var t=this.heapContainter[0];return this.heapContainter[0]=this.heapContainter.pop(),this.heapifyDown(),t}},{key:"heapifyUp",value:function(t){for(var e=t||this.heapContainter.length-1,n=this.getParentIndex(e);this.inHeap(n)&&!this.isCorrectOrder(this.heapContainter[n],this.heapContainter[e]);)this.swap(e,n),e=this.getParentIndex(e),n=this.getParentIndex(e)}},{key:"heapifyDown",value:function(t){for(var e=t||0,n=this.getLeftIndex(e);this.inHeap(n)&&(this.inHeap(n+1)&&this.isCorrectOrder(this.heapContainter[n+1],this.heapContainter[n])&&(n+=1),!this.isCorrectOrder(this.heapContainter[e],this.heapContainter[n]));)this.swap(e,n),e=n,n=this.getLeftIndex(e)}},{key:"isCorrectOrder",value:function(t,e){return this.heapType?this.nodeValueComparator.greaterThanOrEqual(t,e):this.nodeValueComparator.lessThanOrEqual(t,e)}},{key:"swap",value:function(t,e){var n=this.heapContainter[t];this.heapContainter[t]=this.heapContainter[e],this.heapContainter[e]=n}},{key:"toString",value:function(){return this.heapContainter.toString()}},{key:"length",get:function(){return this.heapContainter.length}}]),r}(),B=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;o(this,n),this.left=null,this.right=null,this.parent=null,this.value=t,this.compareFunction=e,this.nodeValueComparator=new J(e)}return a(n,[{key:"setValue",value:function(t){return this.value=t,this}},{key:"setLeft",value:function(t){return this.left=t,this.left&&(this.left.parent=this),this}},{key:"setRight",value:function(t){return this.right=t,this.right&&(this.right.parent=this),this}},{key:"removeChild",value:function(t){return this.left&&this.nodeValueComparator.equal(this.left.value,t.value)?!(this.left=null):!(!this.right||!this.nodeValueComparator.equal(this.right.value,t.value))&&!(this.right=null)}},{key:"replaceChild",value:function(t,e){return!(!t||!e)&&(this.left&&this.nodeValueComparator.equal(this.left,t)?(this.left=e,!0):!(!this.right||!this.nodeValueComparator.equal(this.right,t))&&(this.right=e,!0))}},{key:"traverseInOrder",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return this.left&&this.left.traverseInOrder(e),null!==this.value&&e.push(this.value),this.right&&this.right.traverseInOrder(e),e}},{key:"traverseInOrderCallback",value:function(t){this.left&&this.left.traverseInOrderCallback(t),null!==this.value&&t(this),this.right&&this.right.traverseInOrderCallback(t)}},{key:"sibling",value:function(){return this.parent?this.parent.left===this?this.parent.right:this.parent.left:null}},{key:"isRight",value:function(){return!(!this.parent||this.parent.right!==this)}},{key:"isLeft",value:function(){return!(!this.parent||this.parent.left!==this)}},{key:"getLeafNodes",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return this.left&&this.left.getLeafNodes(e),this.right&&this.right.getLeafNodes(e),this.left||this.right||!this.value||e.push(this.value),e}},{key:"leftHight",get:function(){return this.left?this.left.height:0}},{key:"rightHight",get:function(){return this.right?this.right.height:0}},{key:"height",get:function(){return Math.max(this.leftHight,this.rightHight)+1}},{key:"balanceFactor",get:function(){return this.leftHight-this.rightHight}}],[{key:"copyNode",value:function(t,e){e.setValue(t.value),e.setLeft(t.left),e.setRight(t.right)}}]),n}(),W=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(r,B);var i=u(r);function r(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length?arguments[1]:void 0;return o(this,r),(t=i.call(this,e)).compareFunction=n,t.nodeValueComparator=new J(n),t}return a(r,[{key:"insert",value:function(t){return null===this.value?(this.value=t,this):this.nodeValueComparator.lessThan(t,this.value)?this.left?this.left.insert(t):(e=new r(t,this.compareFunction),this.setLeft(e),e):this.nodeValueComparator.greaterThan(t,this.value)?this.right?this.right.insert(t):(e=new r(t,this.compareFunction),this.setRight(e),e):this;var e}},{key:"find",value:function(t){return this.nodeValueComparator.equal(t,this.value)?this:this.nodeValueComparator.lessThan(t,this.value)&&this.left?this.left.find(t):this.nodeValueComparator.greaterThan(t,this.value)&&this.right?this.right.find(t):null}},{key:"remove",value:function(t){var e=this.find(t);if(!e)throw new Error("Item not found in the tree");var n,i,r=e.parent;return e.left||e.right?e.left&&e.right?(n=e.right.findMin().value,this.nodeValueComparator.equal(n,e.right.value)?(e.setValue(e.right.value),e.setRight(e.right.right)):(e.setValue(n),e.right.remove(n))):(i=e.left||e.right,B.copyNode(i,e)):r?r.removeChild(e):e.setValue(null),!0}},{key:"findMin",value:function(){return this.left?this.left.findMin():this}},{key:"findMax",value:function(){return this.right?this.right.findMax():this}},{key:"getLeft",value:function(){if(this.left)return this.left.findMax();for(var t=this,e=t.parent;e;){if(e.right===t)return e;e=(t=e).parent}return null}},{key:"getRight",value:function(){if(this.right)return this.right.findMin();for(var t=this,e=t.parent;e;){if(e.left===t)return e;e=(t=e).parent}return null}}]),r}(),U=function(){function e(t){o(this,e),this.root=new W(null,t)}return a(e,[{key:"insert",value:function(t){return this.root.insert(t)}},{key:"remove",value:function(t){return this.root.remove(t)}},{key:"find",value:function(t){return this.root.find(t)}},{key:"traverseCallback",value:function(t){return this.root.traverseInOrderCallback(t)}},{key:"traverse",value:function(){return this.root.traverseInOrder()}},{key:"getLeft",value:function(t){var e=this.find(t);if(!e)throw new Error("Item not found in the tree");return e.getLeft()}},{key:"getRight",value:function(t){var e=this.find(t);if(!e)throw new Error("Item not found in the tree");return e.getRight()}},{key:"contains",value:function(t){return!!this.find(t)}},{key:"toString",value:function(){return this.root.traverseInOrder().toString()}},{key:"findLCA",value:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:this.root;if(null===i)return null;if(i.value===t||i.value===e)return i;var r=this.findLCA(t,e,i.left),o=this.findLCA(t,e,i.right);return r&&o?i:r||o}},{key:"isEmpty",value:function(){return null===this.root.value}},{key:"rangeQuery",value:function(t,e,n){var i=2<arguments.length&&void 0!==n?n:this.root;if(null===i)return[];var r=[],o=this.findSplitNode(t,e,i);if(o.left||o.right){for(var s=o.left;s.left||s.right;)s=this.nodeValueComparator.lessThan(s.value,t)?s.right:(r.push.apply(r,l(s.right.traverseInOrder())),s.left);this.nodeValueComparator.lessThan(s.value,t)||this.nodeValueComparator.greaterThan(s.value,e)||r.push(s.value);for(var a=o.right;a.left||a.right;)this.nodeValueComparator.greaterThan(a.value,e)?a=a.left:r.push.apply(r,l(a.left.traverseInOrder()));this.nodeValueComparator.lessThan(a.value,t)||this.nodeValueComparator.greaterThan(a.value,e)||r.push(a.value)}else this.nodeValueComparator.lessThan(o.value,t)||this.nodeValueComparator.greaterThan(o.value,e)||r.push(o.value);return r}},{key:"findSplitNode",value:function(t,e,n){for(var i=2<arguments.length&&void 0!==n?n:this.root;(i.left||i.right)&&(this.nodeValueComparator.lessThan(i.value,t)||this.nodeValueComparator.greaterThan(i.value,e));)i=this.nodeValueComparator.lessThan(i.value,t)?i.right:i.left;return i}}]),e}(),G=[],Z=function(){function i(t,e,n){o(this,i),this.point=t,this.type=e,this.segments=n}return a(i,null,[{key:"comparator",value:function(t,e){return b(t.point,e.point)}}]),i}(),Q=function(){function e(t){o(this,e),this.segment=t,this.compareValue=b(t.begin,t.end)<0?t.begin.y:t.end.y}return a(e,[{key:"update",value:function(t){var e=new j({x:t,y:-1e5},{x:t,y:1e5});this.compareValue=this.segment.intersect(e).y}},{key:"toString",value:function(){return JSON.stringify(this)}}],[{key:"comparator",value:function(t,e){var n=t.compareValue-e.compareValue;if(Math.abs(n)>m)return n;if(t.segment===e.segment)return 0;var i,r=t.segment,o=e.segment,s=b(r.begin,r.end)<0?(i=r.end,r.begin):(i=r.begin,r.end);return T(s,i,b(o.begin,o.end)<0?o.end:o.begin)?-1:1}}]),e}();function Y(t,r,o){var e,n=r.segment,i=o.segment,s=G.find(function(t){var e=k(t.segments,2),n=e[0],i=e[1];return n===r&&i===o||n===o&&i===r});void 0!==s&&-1!==s||!n.intersectProp(i)||(e=new Z(n.intersect(i),"intersect",[r,o]),t.insert(e),G.push(e))}function $(t,e){t.traverseCallback(function(t){t.value.update(e.point.x)})}function K(t){return JSON.parse(JSON.stringify(t))}var X=function(){function n(t,e){o(this,n),this._coord=t,this._incidentEdge=e}return a(n,[{key:"incidentEdge",set:function(t){this._incidentEdge=t},get:function(){return this._incidentEdge}},{key:"coord",set:function(t){this._coord=t},get:function(){return this._coord}},{key:"incidentFaces",get:function(){for(var t=this._incidentEdge,e=t.twin.next,n=[t.incidentFace];e!==t;)n.push(e.incidentFace),e=e.twin.next;return n.filter(function(t){return!!t})}}]),n}(),tt=function(){function e(t){if(o(this,e),!(t&&t instanceof X))throw new Error("Origin must is vertex");this._origin=t}return a(e,[{key:"origin",set:function(t){this._origin=t},get:function(){return this._origin}},{key:"end",get:function(){return this.twin.origin}},{key:"direction",set:function(t){this._direction=t},get:function(){return this._direction}},{key:"twin",set:function(t){if(!(t&&t instanceof e))throw new Error("Twin must be halfEdge");this._twin=t},get:function(){return this._twin}},{key:"incidentFace",set:function(t){this._incidentFace=t},get:function(){return this._incidentFace}},{key:"next",set:function(t){if(!(t&&t instanceof e))throw new Error("Next must be halfEdge");this._next=t},get:function(){return this._next}},{key:"prev",set:function(t){if(!(t&&t instanceof e))throw new Error("Prev must be halfEdge");this._prev=t},get:function(){return this._prev}}]),e}(),et=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(o(this,i),t){if(!(t instanceof tt))throw new Error("Face must has halfEdge outerComponent");t.incidentFace=this;for(var n=t.next;n&&n!==t;)n.incidentFace=this,n=n.next;this._outerComponent=t}if(!(e&&e instanceof Array))throw new Error("Face innnerComponents must is array");this._innerComponents=e}return a(i,[{key:"addInnerComponent",value:function(t){if(!(t&&t instanceof tt))throw new Error("InnerComponent is HalfEdge");this._innerComponents.push(t)}},{key:"getVertices",value:function(){for(var t=this._outerComponent.next,e=[this._outerComponent.origin.coord];t&&t!==this._outerComponent;)e.push(t.origin.coord),t=t.next;return e}},{key:"getEdges",value:function(){for(var t=[this._outerComponent],e=this._outerComponent.next;e&&e!==this._outerComponent;)t.push(e),e=e.next;return t}},{key:"getAdjacentFaces",value:function(){for(var t=this._outerComponent.next,e=this._outerComponent.twin.incidentFace,n=e?[e]:[];t&&t!==this._outerComponent;)(e=t.twin.incidentFace)&&n.push(e),t=t.next;return n}},{key:"outerComponent",get:function(){return this._outerComponent},set:function(t){this._outerComponent=t}},{key:"innerComponents",get:function(){return this._innerComponents}},{key:"site",set:function(t){this._site=t},get:function(){return this._site}}]),i}();var nt=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};o(this,n),this.faces=[],this.halfEdges=[],this.vertices=[],e.needInit&&t&&Array.isArray(t)&&0<t.length&&function(t,e,n,i){for(var r,o,s,a,h,u=t.length,l=0;l<u;l++)i.push(new X(t[l]));for(l=0;l<u;l++)a=new tt(i[l]),i[l].incidentEdge=a,h=new tt(i[s=l===u-1?0:l+1]),(a.twin=h).twin=a,n.push(a,h);for(l=0;l<u;l++)o=0===l?2*(u-1):2*(l-1),n[r=2*l].prev=n[o],n[o].next=n[r],s=0===l?2*(u-1)+1:2*(l-1)+1,n[r=2*l+1].next=n[s],n[s].prev=n[r];var c=new et(n[0]);e.push(c)}(t,this.faces,this.halfEdges,this.vertices)}return a(n,[{key:"removeVertex",value:function(e){var t=this.vertices.findIndex(function(t){return t===e});return-1!==t&&this.vertices.splice(t,1)}},{key:"insertVertex",value:function(){var t;(t=this.vertices).push.apply(t,arguments)}},{key:"removeHalfEdge",value:function(e){var t=this.halfEdges.findIndex(function(t){return t===e});return-1!==t&&this.halfEdges.splice(t,1)}},{key:"insertHalfEdge",value:function(){var t;(t=this.halfEdges).push.apply(t,arguments)}},{key:"removeFace",value:function(e){var t=this.faces.findIndex(function(t){return t===e});return-1!==t&&this.faces.splice(t,1)}},{key:"insertFace",value:function(){var t;(t=this.faces).push.apply(t,arguments)}}]),n}(),it=function(){function n(t,e){o(this,n),this.edge=t,this.helper=e,this.compareValue=this.edge.begin.y}return a(n,[{key:"update",value:function(t){var e=new F({x:t,y:0},{x:0,y:1});this.compareValue=e.intersectSegment(this.edge).y}}],[{key:"comparator",value:function(t,e){var n=t.compareValue-e.compareValue;return Math.abs(n)>m?n:0}}]),n}();function rt(t,e){var n=new j(e.vertex.coord,e.vertex.incidentEdge.end.coord);t.insert(new it(n,e))}function ot(t,e,n){var i=e.incidentEdge.incidentFace,r=new tt(e);r.prev=e.incidentEdge.prev,(e.incidentEdge.prev.next=r).next=n.incidentEdge;var o=new tt(n);o.prev=n.incidentEdge.prev,(n.incidentEdge.prev.next=o).next=e.incidentEdge,e.incidentEdge.prev=o,n.incidentEdge.prev=r,e.incidentEdge=r,n.incidentEdge=o,(r.twin=o).twin=r,t.insertHalfEdge(r),t.insertHalfEdge(o);var s=new et(r),a=new et(o);t.removeFace(i),t.insertFace(s),t.insertFace(a)}function st(t){for(var e,n,i,r,o,s=t.vertices.slice(0,-1),a=new nt(s,{needInit:!0}),h=function(t){for(var e,n,i,r=[],o=t.length,s=0;s<o;s++)e=0===s?o-1:s-1,n=s===o-1?0:s+1,i=t[s].coord.x<t[e].coord.x&&t[s].coord.x<t[n].coord.x?w(t[e].coord,t[s].coord,t[n].coord)?"start":"split":t[s].coord.x>t[e].coord.x&&t[s].coord.x>t[n].coord.x?w(t[e].coord,t[s].coord,t[n].coord)?"end":"merge":t[s].coord.x>t[e].coord.x&&t[s].coord.x<t[n].coord.x?"lowerRegular":"upperRegular",r[s]={vertex:t[s],type:i};return r.sort(function(t,e){return t.vertex.coord.x-e.vertex.coord.x}),r}(a.vertices),u=new U(it.comparator);0<h.length;)switch(function(t,e){t.traverseCallback(function(t){t.value.update(e.x)})}(u,n=(e=h.shift()).vertex.coord),e.type){case"start":rt(u,e);break;case"end":"merge"===(i=u.find({compareValue:n.y}).value).helper.type&&ot(a,e.vertex,i.helper.vertex),u.remove(i);break;case"split":rt(u,e),i=u.getLeft({compareValue:n.y}).value,ot(a,e.vertex,i.helper.vertex),i.helper=e;break;case"merge":"merge"===(r=u.find({compareValue:n.y}).value).helper.type&&ot(a,e.vertex,r.helper.vertex),"merge"===(o=u.getLeft({compareValue:n.y}).value).helper.type&&ot(a,e.vertex,o.helper.vertex),u.remove(r),o.helper=e;break;case"lowerRegular":"merge"===(i=u.find({compareValue:n.y}).value).helper.type&&ot(a,e.vertex,i.helper.vertex),u.remove(i),rt(u,e);break;case"upperRegular":rt(u,e),"merge"===(i=u.getLeft({compareValue:n.y}).value).helper.type&&ot(a,e.vertex,i.helper.vertex),i.helper=e,u.remove({compareValue:n.y});break;default:throw new Error("Event Type Error")}return a.faces.map(function(t){return t.getVertices()})}t.Animation=g,t.CanvasRender=H,t.Geometry=N,t.convexIntersect=function(t,e,n){for(var i,r,o,s,a,h,u,l,c=[],f=new z(0,0),g=t.vertices.slice(0,-1),y=e.vertices.slice(0,-1),v=g.length,p=y.length,d=null,x=0,m=0,b=0,w=0;b<2*v&&w<2*p;){if(r=g[x],s=y[m],i=g[(x+v-1)%v],o=y[(m+p-1)%p],a=C(f,new z(r.x-i.x,r.y-i.y),new z(s.x-o.x,s.y-o.y)),h=C(o,s,r),u=C(i,r,s),null!==(l=new j(i,r).intersect(new j(o,s)))){if(0<c.length&&l.equal(c[0])){c.push(l);break}c.push(l),0<h?d="p":0<u&&(d="q")}if(0===a&&h<0&&u<0)return null;a===u===h===0?"p"===d?(m=(m+1)%p,w+=1):(x=(x+1)%v,b+=1):0<=a&&0<u||a<0&&h<=0?("p"===d&&c.push(r),x=(x+1)%v,b+=1):(0<=a&&u<=0||a<0&&0<h)&&("q"===d&&c.push(s),m=(m+1)%p,w+=1),Array.isArray(n)&&n.push({currentEdges:[new j(i,r),new j(o,s)],intersectPolygon:new q(c)})}return c.length<=2?null:new q(c)},t.earTriangulate=function(t){for(var e,n,i,r,o=t.vertices.slice(0,-1),s=[],a=0;3<o.length;)e=a-1==-1?o.length-1:a-1,n=a+1===o.length?0:a+1,i=e-1==-1?o.length-1:e-1,r=n+1===o.length?0:n+1,a=I(o[i],o[e],o[a],o[n])&&I(o[a],o[n],o[r],o[e])&&S(o,o[e],o[n])?(s.push([o[e],o[a],o[n]]),o.splice(a,1),a===o.length?0:a):n;return 3===o.length&&s.push(o),s},t.grahamScanCH=function(t,e){var n,i=[],r=M(t);for(i.push(r.shift()),i.push(r.shift());0<r.length;)T(i[(n=i.length)-2],i[n-1],r[0])?i.push(r.shift()):i.pop(),e&&Array.isArray(e)&&e.push({vertice:r[0],chVertices:i.map(function(t){return new z(t.x,t.y)})});return i},t.incrementalCH=function(t,e){if(!(Array.isArray(t)&&e instanceof z))throw new TypeError("Paramters Type Error");if(t.length<2)t.push(e);else if(2===t.length)t.push(e),T.apply(A,l(t))||t.reverse();else{var n=[];t.unshift(t[t.length-1]),t.push(t[1]);for(var i=1;i<t.length-1;i++)T(t[i],t[i+1],e)?n.push(t[i]):T(t[i-1],t[i],e)&&(n.push(t[i]),n.push(e));t.splice.apply(t,[0,t.length].concat(n))}return t},t.segmentsIntersect=function(t,e){var n,i,r,o,s,a,h,u,l,c,f,g,y,v,p,d,x,m,b=(a=[],t.forEach(function(t){r=new Q(t),s=t.begin.x<t.end.x||t.begin.x===t.end.x&&t.begin.y<t.end.y?(o=t.begin,t.end):(o=t.end,t.begin),a.push(new Z(o,"leftEnd",[r])),a.push(new Z(s,"rightEnd",[r]))}),new D(a,0,Z.comparator)),w=new U(Q.comparator);G.length=0;try{for(;0<b.length;){"leftEnd"===(g=b.pop()).type?($(w,g),h=k(g.segments,1)[0],w.insert(h),n=w.getLeft(h),i=w.getRight(h),n&&Y(b,h,n.value),i&&Y(b,h,i.value)):"rightEnd"===g.type?($(w,g),h=k(g.segments,1)[0],n=w.getLeft(h),i=w.getRight(h),n&&i&&Y(b,n.value,i.value),w.remove(h)):(c=l=void 0,Q.comparator(g.segments[0],g.segments[1])<0?(l=(u=k(g.segments,2))[0],c=u[1]):(c=(f=k(g.segments,2))[0],l=f[1]),n=w.getLeft(l),(i=w.getRight(c))&&Y(b,l,i.value),n&&Y(b,c,n.value),v=l,p=c,x=d=void 0,d=(y=w).find(v),x=y.find(p),m=d.value,d.value=x.value,x.value=m,$(w,g)),e&&Array.isArray(e)&&e.push({event:K(g),statusTree:K(w.traverse()),intersections:K(G)})}}catch(t){console.log("Erroï¼š"),console.log(t)}return G},t.trapezoidTriangulate=function(t,e){var n=[],i=st(t);return Array.isArray(e)&&e.push.apply(e,l(i.slice())),i.forEach(function(t){n.push.apply(n,l(function(t){for(var e,n,i,r=t.length,o=[],s=0;s<r;s++)e=0===s?r-1:s-1,n=s===r-1?0:s+1,i=t[s].x>t[e].x&&t[s].x<t[n].x?"lower":"upper",o.push({vertex:t[s],type:i});o.sort(function(t,e){return t.vertex.x-e.vertex.x});var a,h,u,l=[],c=o.slice(0,2);for(s=2;s<r-1;s++)if((a=c.pop()).type===o[s].type){for(;0<c.length;){if(h=c.pop(),!("upper"===a.type?_(o[s].vertex,a.vertex,h.vertex):_(h.vertex,a.vertex,o[s].vertex))){c.push(h,a);break}if(u="upper"===a.type?[o[s].vertex,a.vertex,h.vertex]:[o[s].vertex,h.vertex,a.vertex],l.push(u),a=h,0===c.length){c.push(h);break}}c.push(o[s])}else{for(;0<c.length;)u="upper"===(h=c.pop()).type?[o[s].vertex,a.vertex,h.vertex]:[o[s].vertex,h.vertex,a.vertex],l.push(u),a=h;c.push(o[s-1],o[s])}for(s=0;s<c.length-1;s++)u="uppper"===c[s].type?[o[r-1].vertex,c[s+1].vertex,c[s].vertex]:[o[r-1].vertex,c[s].vertex,c[s+1].vertex],l.push(u);return l}(t)))}),n},t.upperLowerCH=function(t){for(var e,n,i=[],r=[],o=t.slice().sort(function(t,e){return t.x-e.x||t.x===e.x&&t.y-e.y}),s=o.length-1;0<=s;)(e=i.length)<2||T(i[e-2],i[e-1],o[s])?(i.push(o[s]),--s):i.pop();for(s=0;s<o.length;)(n=r.length)<2||T(r[n-2],r[n-1],o[s])?(r.push(o[s]),s+=1):r.pop();return r.shift(),r.pop(),i.concat(r)},Object.defineProperty(t,"__esModule",{value:!0})});
